<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ERP Latency – Monitoroverzicht</title>

  <style>
    :root { color-scheme: light dark; }

    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      margin: 24px;
    }

    h1 { margin-bottom: 8px; }

    .top-responses {
      margin: 30px 0 40px;
      padding: 20px;
      border-radius: 12px;
      background: rgba(127,127,127,.08);
    }

    .response-group {
      margin-bottom: 25px;
    }

    .response-group h2 {
      margin-bottom: 12px;
    }

    .response-grid {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }

    .response-item {
      text-align: center;
    }

    .response-item img {
      height: 70px; /* Groot formaat */
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }

    th, td {
      padding: 8px;
      border-bottom: 1px solid rgba(127,127,127,.25);
    }

    th {
      text-align: left;
      font-weight: 600;
    }

    td img {
      height: 20px;
    }
  </style>
</head>

<body>

<h1>ERP Monitoroverzicht</h1>

<div class="top-responses">

  <div class="response-group">
    <h2>Via middleware – Response</h2>
    <div class="response-grid">
      <div class="response-item">
        <div>Companies (184)</div>
        <a href="https://vrooamstatus.nl/api/badge/184/response" target="_blank">
          <img src="https://vrooamstatus.nl/api/badge/184/response">
        </a>
      </div>

      <div class="response-item">
        <div>Articles (185)</div>
        <a href="https://vrooamstatus.nl/api/badge/185/response" target="_blank">
          <img src="https://vrooamstatus.nl/api/badge/185/response">
        </a>
      </div>

      <div class="response-item">
        <div>Availabilities (350)</div>
        <a href="https://vrooamstatus.nl/api/badge/350/response" target="_blank">
          <img src="https://vrooamstatus.nl/api/badge/350/response">
        </a>
      </div>
    </div>
  </div>

  <div class="response-group">
    <h2>Direct – Response</h2>
    <div class="response-grid">
      <div class="response-item">
        <div>Companies (349)</div>
        <a href="https://vrooamstatus.nl/api/badge/349/response" target="_blank">
          <img src="https://vrooamstatus.nl/api/badge/349/response">
        </a>
      </div>

      <div class="response-item">
        <div>Articles (351)</div>
        <a href="https://vrooamstatus.nl/api/badge/351/response" target="_blank">
          <img src="https://vrooamstatus.nl/api/badge/351/response">
        </a>
      </div>

      <div class="response-item">
        <div>Availabilities (352)</div>
        <a href="https://vrooamstatus.nl/api/badge/352/response" target="_blank">
          <img src="https://vrooamstatus.nl/api/badge/352/response">
        </a>
      </div>
    </div>
  </div>

</div>

  <div class="wrap">
    <h1>Monitoroverzicht</h1>
    <p class="muted">
      Sets in volgorde: <strong>companies</strong>, <strong>articles</strong>, <strong>availabilities</strong>.
      Badges worden live geladen vanaf <code>https://vrooamstatus.nl</code>.
    </p>

    <div class="section">
      <h2>Via middleware</h2>
      <table>
        <thead>
          <tr>
            <th class="type">Route</th>
            <th class="cat">Categorie</th>
            <th class="id">Monitor</th>
            <th>Status</th>
            <th>Uptime</th>
            <th>Ping</th>
            <th>Avg response</th>
            <th>Cert exp</th>
            <th>Response</th>
          </tr>
        </thead>
        <tbody id="tbody-middleware"></tbody>
      </table>
    </div>

    <div class="section">
      <h2>Direct</h2>
      <table>
        <thead>
          <tr>
            <th class="type">Route</th>
            <th class="cat">Categorie</th>
            <th class="id">Monitor</th>
            <th>Status</th>
            <th>Uptime</th>
            <th>Ping</th>
            <th>Avg response</th>
            <th>Cert exp</th>
            <th>Response</th>
          </tr>
        </thead>
        <tbody id="tbody-direct"></tbody>
      </table>
    </div>
  </div>

  <script>
    const base = "https://vrooamstatus.nl/api/badge";

    // Afgeleid uit jouw beschrijving:
    const monitors = [
      { route: "middleware", category: "companies",       id: 184 },
      { route: "middleware", category: "articles",        id: 185 },
      { route: "middleware", category: "availabilities",  id: 350 },
      { route: "direct",     category: "companies",       id: 349 },
      { route: "direct",     category: "articles",        id: 351 },
      { route: "direct",     category: "availabilities",  id: 352 },
    ];

    const metrics = [
      { key: "status",       label: "Status" },
      { key: "uptime",       label: "Uptime" },
      { key: "ping",         label: "Ping" },
      { key: "avg-response", label: "Avg response" },
      { key: "cert-exp",     label: "Cert exp" },
      { key: "response",     label: "Response" },
    ];

    function badgeUrl(id, metricKey) {
      return `${base}/${id}/${metricKey}`;
    }

    function badgeCell(id, metric) {
      const url = badgeUrl(id, metric.key);
      // Klikbaar (handig bij troubleshooten) + img voor badge.
      return `
        <td class="badges">
          <a href="${url}" target="_blank" rel="noopener">
            <img src="${url}" alt="${metric.label} (${id})" loading="lazy" />
            <small class="muted">open</small>
          </a>
        </td>
      `;
    }

    function row(m) {
      const cells = metrics.map(metric => badgeCell(m.id, metric)).join("");
      return `
        <tr>
          <td class="type">${m.route}</td>
          <td class="cat">${m.category}</td>
          <td class="id">${m.id}</td>
          ${cells}
        </tr>
      `;
    }

    const tbodyMiddleware = document.getElementById("tbody-middleware");
    const tbodyDirect = document.getElementById("tbody-direct");

    monitors.forEach(m => {
      if (m.route === "middleware") tbodyMiddleware.insertAdjacentHTML("beforeend", row(m));
      if (m.route === "direct") tbodyDirect.insertAdjacentHTML("beforeend", row(m));
    });
  </script>
</body>
</html>
